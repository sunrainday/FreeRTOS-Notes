# FreeRTOS学习笔记

## FreeRTOS的优势
1. 轻量级
2. 高效
3. 可靠
4. 可移植
5. 开源
 可以专注逻辑开发，减少耦合

### 1. 任务管理
   1. 任务创建 
   创建动态任务和静态任务
   动态任务需要手动释放内存，静态任务在创建时分配内存，任务创建后需要启动任务
   2.任务调度策略
   优先级数值越大，优先级越高（每个任务执行一个时间片，一个时间片是一次时钟中断）
    任务状态
    任务的状态
    挂起态：任务被挂起，不参与任务调度
    就绪态：任务已经创建，但未运行
    运行态：任务正在运行
    阻塞态：任务等待某个事件发生，如等待信号量、队列等

    任务会创建一个堆的结构体，包含任务信息，任务栈，任务函数，任务优先级等，这是一个数据

   3.任务切换

   LTS：longTime Sopuute


### 数据类型和结构体和命名规范
#### 数据类型
    UBaseType_t:无符号的基本类型，32位架构上被定义为32位，16位架构上被定义为16位，也有例外
    TickType：时钟节拍数，用于表示时间，单位是时钟节拍
    BaseType_t:架构中最有效最基本的类型，32位架构上被定义为32位，16位架构上，BaseType_t被定义为16位类型，    
    StackType_t:架构用于储存堆栈项目的类型，16位的架构上被定义为16位，32位架构上被定义为32位，也有例外
**BaseType_t是有符号的**

#### 函数命名
   (1) 函数命名使用驼峰式命名法，以FreeRTOS开头，以函数功能结尾，例如FreeRTOSCreateTask
   (2)文件作用域静态(私有)函数以prv为前缀
   (3)API函数以返回类型为前缀，并为Void添加前缀v
   (4)API函数名称以定义API函数文件的名称开头，例如vTaskDelay
   V表示函数返回值是void，Task表示这个函数定义在Tasl.c文件中,Delay表示这个函数的功能是延时
   
### 中断管理

   FreeRTOS会把PendSV和SysTick设置最低中断优先级（数值最大，15）保证系统切换不会组设系统其他中断响应
   FreeRTOS利用BASEPRI寄存器实现中断管理（在STM32中有的就寄存器），屏蔽优先级低于BASEPRI的中断，从而实现中断管理

  在中断服务函数中调用FreeRTOS的API函数需要注意：
   中高端服务函数的优先级需要在FreeRTOS管理范围内，阈值是configMAX_SYSALL_INTERRUPT_PRIORITY指定（建议所有优先级位指定为抢占优先级，方便FreeRTOS管理）
   在中断服务函数中电泳FreeRTOOS的API函数，必须使用带有“FromISR”后缀的函数
####    临界段
taskENTER_CRITCAL();进入临界段，调用了portDISABLE_INTERRUPTS()关闭中断FreeRTOS管理的中断

### 2. 时间管理

在FreeRTOS.h中定义了两个宏，用于获取系统时钟节拍数，可以设置时间片的时间

### 3. 内存管理
### 4. 中断管理
### 5. 任务通知
### 6. 队列管理
   1. 队列创建
   小队列可以直接传值，大队列需要传指针

   2. 队列发送
   3. 队列接收


### 7. 信号量管理

1.二值信号量：用于互斥访问资源，只能被一个任务持有，其他任务必须等待（特殊的队列）
2.计数信号量：用于限制资源的使用数量，可以同时被多个任务持有，但数量不能超过最大值


### 8. 事件管理
### 9. 软件定时器

## FreeRTOS的配置
1. 配置文件
2. 配置选项
3. 配置参数

## FreeRTOS的任务管理

2.  
